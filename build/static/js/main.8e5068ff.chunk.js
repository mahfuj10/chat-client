(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},606:function(e,t,a){},608:function(e,t,a){"use strict";a.r(t);var o=a(1),s=a.n(o),n=a(48),i=a.n(n),l=a(141),r=a(180),c=a(140),d=a(79),u=a(176),j=a(349),b=a(8),h=a(681),p=a(682),x=a(684),m=a(685),g=a(665),v=a(178),O=a.n(v),f=a(683);const y=()=>Object(l.b)(),k=l.c;var w=a(19),C=a.n(w),S=a(51);localStorage.getItem("openDrawer");const U=Object(S.b)("messsages/data",(async e=>(await C.a.get("http://localhost:8080/chat/".concat(e))).data)),E=Object(S.b)("allusers/data",(async()=>(await C.a.get("http://localhost:8080/users")).data)),I=Object(S.b)("allgroups/data",(async()=>(await C.a.get("http://localhost:8080/group")).data)),L=Object(S.b)("deletemessage/data",(async e=>(await C.a.put("http://localhost:8080/chat/deletemessage/".concat(e))).data)),D=Object(S.b)("deleteallmessage/data",(async e=>(await C.a.delete("http://localhost:8080/chat/deleteallmessages/".concat(e))).data)),R=Object(S.b)("updateUserName/data",(async e=>(await C.a.put("http://localhost:8080/users/updatename/".concat(e.uid),e)).data)),N=Object(S.b)("updateUserNumber/data",(async e=>(await C.a.put("http://localhost:8080/users/updatennumber/".concat(e.uid),e)).data)),A=Object(S.b)("updateUserAddress/data",(async e=>(await C.a.put("http://localhost:8080/users/updatenaddress/".concat(e.uid),e)).data)),_=Object(S.b)("updateUserProfession/data",(async e=>(await C.a.put("http://localhost:8080/users/updatenprofession/".concat(e.uid),e)).data)),F=Object(S.c)({name:"dataSlice",initialState:{value:0,status:"idle",messagedataLoading:!0,loginUser:{},allUsers:[],usersDataLoading:!0,convertationUsers:[],selectedUser:{},selectedGroupMembers:[],allGroups:[],groupsDataLoading:!0,selectedGroup:{},messages:[],messageDataLoading:!0,groupChat:[],createdGroup:{},joinedGroups:[],searchText:"",updateUserInfo:"",deleteTextLoading:!0,allMessageDeleteLoading:!0,openDetailsSection:!0},reducers:{currentLoginUser:(e,t)=>{e.loginUser=t.payload},myConvertations:(e,t)=>{e.convertationUsers=t.payload},selectUser:(e,t)=>{e.selectedUser=t.payload},addGroupMembers:(e,t)=>{e.selectedGroupMembers.push(t.payload)},removeFromSelectedPeople:(e,t)=>{e.selectedGroupMembers=e.selectedGroupMembers.filter((e=>e.uid!==t.payload))},reseatGroupMembers:(e,t)=>{e.selectedGroupMembers=[],e.selectedGroup={}},selectGroup:(e,t)=>{e.selectedGroup=t.payload},getGroupChat:(e,t)=>{e.groupChat=t.payload},saveCreatedGroup:(e,t)=>{e.createdGroup=t.payload},getJoinedGroups:(e,t)=>{e.joinedGroups=t.payload},saveSearchName:(e,t)=>{e.searchText=t.payload},setOpenDetailsSection:e=>{e.openDetailsSection=!1},closeOpenDetailsSection:e=>{e.openDetailsSection=!0}},extraReducers:e=>{e.addCase(E.pending,((e,t)=>{e.usersDataLoading=!0})).addCase(E.fulfilled,((e,t)=>{e.allUsers=t.payload,e.usersDataLoading=!1})).addCase(I.pending,((e,t)=>{e.groupsDataLoading=!0})).addCase(I.fulfilled,((e,t)=>{let{payload:a}=t;e.groupsDataLoading=!1,e.allGroups=a})).addCase(U.pending,((e,t)=>{e.messageDataLoading=!0})).addCase(U.fulfilled,((e,t)=>{let{payload:a}=t;e.messageDataLoading=!1,e.messages=a})).addCase(L.pending,((e,t)=>{e.deleteTextLoading=!0})).addCase(L.fulfilled,((e,t)=>{e.deleteTextLoading=!1})).addCase(D.pending,((e,t)=>{e.allMessageDeleteLoading=!0})).addCase(D.fulfilled,((e,t)=>{e.allMessageDeleteLoading=!1})).addCase(R.pending,((e,t)=>{e.updateUserInfo=!0})).addCase(R.fulfilled,((e,t)=>{e.updateUserInfo=!1})).addCase(N.pending,((e,t)=>{e.updateUserInfo=!0})).addCase(N.fulfilled,((e,t)=>{e.updateUserInfo=!1})).addCase(A.pending,((e,t)=>{e.updateUserInfo=!0})).addCase(A.fulfilled,((e,t)=>{e.updateUserInfo=!1})).addCase(_.pending,((e,t)=>{e.updateUserInfo=!0})).addCase(_.fulfilled,((e,t)=>{e.updateUserInfo=!1}))}}),{currentLoginUser:M,myConvertations:G,selectUser:z,addGroupMembers:P,removeFromSelectedPeople:B,selectGroup:T,getGroupChat:V,saveCreatedGroup:W,reseatGroupMembers:Y,getJoinedGroups:K,saveSearchName:q,setOpenDetailsSection:H,closeOpenDetailsSection:J}=F.actions;var Q=F.reducer,X=a(9),Z=a(676),$=a(2);const ee=Object(X.a)(Z.a)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),te=e=>{let{photoURL:t,width:a=50,height:o=50}=e;return Object($.jsx)($.Fragment,{children:Object($.jsx)(ee,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object($.jsx)(f.a,{sx:{width:{xs:30,md:a},height:{xs:30,md:o}},alt:"Remy Sharp",src:t})})})};var ae=function(e){let{convertionalUser:t,socket:a,uid:o,selectChatBox:s,onlineUsers:n}=e;const i=y();return Object($.jsx)($.Fragment,{children:Object($.jsxs)(x.a,{onClick:()=>{i(z(t)),s()},sx:{display:"flex",gap:1,alignItems:"center",mb:3,p:1,borderRadius:o===t.uid?0:2,background:o===t.uid?"none":"#5C4F81",borderRight:o===t.uid?"3px solid #5C4F81":""},children:[n.includes(t.uid)?Object($.jsx)(te,{photoURL:t.photoURL}):Object($.jsx)(f.a,{alt:"user photo",sx:{width:{xs:30,md:50},height:{xs:30,md:50}},src:t.photoURL}),Object($.jsxs)(x.a,{sx:{display:{xs:"none",md:"block"}},children:[Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:16,color:"whitesmoke"},children:t.displayName}),Object($.jsxs)(m.a,{variant:"h6",sx:{fontSize:11,color:"#9881d6"},children:[o===t.uid&&Object($.jsx)(d.c,{className:"reply_icon"}),t.email]})]})]})})},oe=a(679),se=a(677);var ne=function(e){var t;let{socket:a,roomId:s,uid:n,addConverationRoute:i,handleDrawerOpen:l,selectChatBox:r,onlineUsers:c}=e;const[d,u]=Object(o.useState)({});null===a||void 0===a||null===(t=a.current)||void 0===t||t.on("addedUser",(function(e){j(E()),u(e)}));const j=y(),{allUsers:b,convertationUsers:h,usersDataLoading:p,selectedUser:g,searchText:v,loginUser:O}=k((e=>e.data)),f=b.find((e=>e.uid===O.uid));Object(o.useEffect)((()=>{var e,t;const a=[];if(0!==(null===f||void 0===f||null===(e=f.contracts)||void 0===e?void 0:e.length)&&null!=(null===f||void 0===f||null===(t=f.contracts)||void 0===t?void 0:t.length)){for(let e=0;e<(null===f||void 0===f||null===(o=f.contracts)||void 0===o?void 0:o.length);e++){var o;const t=null===f||void 0===f?void 0:f.contracts[e],s=b.find((e=>e.uid===t));a.push(s)}j(G(a))}}),[O,p,d]);const w=h.filter((e=>{var t,a;return null===(t=e.displayName)||void 0===t||null===(a=t.toLowerCase())||void 0===a?void 0:a.includes(null===v||void 0===v?void 0:v.toLowerCase())}));return Object($.jsxs)(x.a,{sx:{p:2,height:550,overflowY:"scroll"},children:[0===(null===h||void 0===h?void 0:h.length)&&!p&&Object($.jsxs)(x.a,{sx:{width:"100%"},children:[Object($.jsx)(m.a,{variant:"h5",sx:{mb:2,textAlign:"center",color:"whitesmoke",letterSpacing:2,fontSize:{xs:"0.5rem",md:"1rem",lg:"1.5rem"}},children:"Please add people on your contracts"}),Object($.jsx)(oe.a,{id:"addContactBtn",onClick:i,sx:{display:{xs:"none",lg:"block"}},children:"Make friends"}),Object($.jsx)(oe.a,{onClick:l,id:"addContactBtn",sx:{display:{xs:"block",lg:"none"}},children:"Add People"})]}),p&&0===h.length&&Object($.jsx)($.Fragment,{children:[...new Array(4)].map(((e,t)=>Object($.jsx)(se.a,{height:90,animation:"wave"},t)))}),w.map(((e,t)=>Object($.jsx)(ae,{convertionalUser:e,uid:n,socket:a,onlineUsers:c,selectChatBox:r,roomId:s},e._id)))]})},ie=a(687),le=a(664),re=a(179),ce=a(91),de=a(57),ue=a(40);const je={apiKey:"AIzaSyBR6dd5hk9PLwiNMKtmOV_r5M3l6BvRW3Q",authDomain:"leaveschat.firebaseapp.com",projectId:"leaveschat",storageBucket:"leaveschat.appspot.com",messagingSenderId:"622961679676",appId:"1:622961679676:web:59335a09cc9c0bb694d239",measurementId:"G-5L58HEEQR7"};var be=a(340),he=a.n(be);Object(ue.e)(je);const pe=()=>{var e;const[t,a]=Object(o.useState)({}),[s,n]=Object(o.useState)(!0),[i,l]=Object(o.useState)(""),r=y(),c=Object(b.p)(),[d,u]=Object(o.useState)(!1);null===(e=t.metadata)||void 0===e||e.createdAt;const j=new de.a,h=Object(de.c)(),p=Object(b.n)();Object(o.useEffect)((()=>{n(!0),Object(de.d)(h,(e=>{if(e){const t={createdAt:e.metadata.createdAt},o={photoURL:e.photoURL,displayName:e.displayName,uid:e.uid,createdAt:t.createdAt,email:e.email};r(M(o)),a(e)}else a({}),r(M({}));n(!1)}))}),[h]);const x=(e,t)=>{fetch("http://localhost:8080/users",{method:t,headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then()};return{handleGoogleSign:e=>{n(!0),Object(de.g)(h,j).then((t=>{var a;const o=t.user,s={createdAt:o.metadata.createdAt},i={photoURL:o.photoURL,displayName:o.displayName,uid:o.uid,createdAt:s.createdAt,email:o.email,phone:null,adress:null,contracts:[],groups:[],profession:null};r(M({userData:i}));const l=(null===(a=e.state)||void 0===a?void 0:a.from.pathname)||"/";c(l),n(!1),C.a.get("http://localhost:8080/users/checkuser/".concat(null===o||void 0===o?void 0:o.uid)).then((e=>{!0===e.data.newUser&&x(i,"PUT")}))})).catch((e=>{l(e.message)})).finally((()=>n(!1)))},user:t,error:i,loading:s,logOut:()=>{n(!0);const e=Object(de.c)();Object(de.h)(e).then((()=>{a({}),r(M({}))})).catch((e=>{console.error(e)})).finally((()=>n(!1)))},signUpWithEmail:(e,t,a)=>{n(!0),u(!0),Object(de.b)(h,t,a).then((t=>{Object(de.i)(h.currentUser,{displayName:e,photoURL:"https://w7.pngwing.com/pngs/831/88/png-transparent-user-profile-computer-icons-user-interface-mystique-miscellaneous-user-interface-design-smile-thumbnail.png"}).then((e=>{var a;const o=t.user,{createdAt:s}=o.metadata,n={photoURL:o.photoURL,displayName:o.displayName,uid:o.uid,createdAt:s,email:o.email,phone:null,adress:null,contracts:[],groups:[],profession:null};x(n,"POST"),r(M({userData:n})),u(!1),c((null===(a=p.state)||void 0===a?void 0:a.from.pathname)||"/")})).catch((e=>{l(e.message)})).finally((()=>n(!1)))})).catch((e=>{u(!1),l(e.message)}))},logInWithEmail:(e,t)=>{n(!0),u(!0),Object(de.f)(h,e,t).then((e=>{var t;const a=e.user,{createdAt:o}=a.metadata,s={photoURL:a.photoURL,displayName:a.displayName,uid:a.uid,createdAt:o,email:a.email,phone:null,adress:null,contracts:[],groups:[],profession:null};r(M({userData:s})),u(!1),c((null===(t=p.state)||void 0===t?void 0:t.from.pathname)||"/")})).catch((e=>{l(e.message),u(!1)})).finally((()=>n(!1)))},processing:d,reseatPassword:e=>{u(!0),Object(de.e)(h,e).then((()=>{u(!1),he()("Email sent","Please check your email","success")})).catch((e=>{const t=e.message;l(t),u(!1)}))},updatePhotoAndName:(e,t)=>{Object(de.i)(h.currentUser,{displayName:e,photoURL:t}).then((e=>{})).catch((e=>{console.log(e.message),l(e.message)}))},updateError:e=>{l(e)}}};var xe=a(121),me=a(341);function ge(e){return Object($.jsxs)(x.a,{sx:{position:"relative"},children:[Object($.jsx)(le.a,{variant:"determinate",sx:{color:e=>e.palette.grey["light"===e.palette.mode?400:800]},size:25,thickness:4,...e,value:100}),Object($.jsx)(le.a,{variant:"indeterminate",disableShrink:!0,sx:{color:e=>"light"===e.palette.mode?"#4E426D":"#308fe8",animationDuration:"550ms",position:"absolute",left:0,["& .".concat(me.a.circle)]:{strokeLinecap:"round"}},size:25,thickness:4,...e})]})}var ve=a(351),Oe=a(672);const fe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:450,bgcolor:"background.paper",boxShadow:24};function ye(e){let{openModal:t,handleOpenModal:a,handleCloseModal:o,image:s}=e;return Object($.jsx)($.Fragment,{children:Object($.jsx)(Oe.a,{keepMounted:!0,open:t,onClose:o,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object($.jsx)(x.a,{sx:fe,children:Object($.jsx)(f.a,{src:s,sx:{width:"100%",height:"100%",borderRadius:0},alt:"sender image"})})})})}var ke=a(175),we=a(342);a(115);var Ce=e=>{let{messageContent:t,user:a,textLoading:n,socket:i,roomId:l,deletedMessage:r}=e;const[c,d]=s.a.useState(!1),u=()=>d(!0),j=y(),{deleteTextLoading:b}=k((e=>e.data)),[h,p]=Object(o.useState)({});return Object($.jsxs)($.Fragment,{children:[null!==t&&void 0!==t&&t.deleted?Object($.jsx)(x.a,{sx:{display:"grid",justifyContent:t.userId===a.uid?"flex-end":"flex-start"},children:Object($.jsxs)(m.a,{className:"message_text",sx:{background:"#4E426D",p:1.5,color:"#ddd6d6",borderRadius:2,mb:2},variant:"body2",children:[Object($.jsx)(we.a,{})," This message was deleted"]})}):Object($.jsxs)(x.a,{id:t.userId===a.uid?"myMessage":"yourMessage",sx:{mb:2},children:[t.userId===a.uid&&Object($.jsx)(ie.a,{onClick:()=>{(e=>{var a;j(L(null===t||void 0===t?void 0:t._id));const o={...e,roomId:l};null===i||void 0===i||null===(a=i.current)||void 0===a||a.emit("deleteMessage",o)})(t),p(t)},className:"delete_button",children:Object($.jsx)(ke.a,{style:{fontSize:16}})}),t.userId!==a.uid&&Object($.jsx)(f.a,{sx:{width:25,height:25,objectFit:"cover",mt:3,mr:.5,background:"#fff"},src:null===t||void 0===t?void 0:t.image,alt:"senderImage"}),Object($.jsxs)("span",{children:[t.picture&&Object($.jsx)($.Fragment,{children:Object($.jsx)(f.a,{onClick:u,sx:{width:{xs:120,md:200},height:{xs:100,md:150},borderRadius:2,boxShadow:3,mb:1},src:null===t||void 0===t?void 0:t.picture,alt:"sendpicture"})}),""!==t.message&&Object($.jsx)(m.a,{className:"message_text",sx:{background:"#4E426D",p:1.5,color:"whitesmoke",lineHeight:1.5,borderRadius:2},variant:"body2",children:t.message}),Object($.jsx)(m.a,{variant:"caption",sx:{fontSize:10,color:"#e5dada"},children:Object(ve.a)(t.time)})]})]},t._id),Object($.jsx)(ye,{image:t.picture,openModal:c,handleOpenModal:u,handleCloseModal:()=>d(!1)})]})},Se=a(344),Ue=a.n(Se),Ee=a(183),Ie=a.n(Ee),Le=a(345),De=a.n(Le),Re=a(671),Ne=a(674),Ae=a(680),_e=a(688),Fe=a(695);var Me=e=>{let{user:t}=e;const{messages:a,messageDataLoading:o,openDetailsSection:s}=k((e=>null===e||void 0===e?void 0:e.data)),n=a.filter((e=>null===e||void 0===e?void 0:e.picture));return Object($.jsx)($.Fragment,{children:Object($.jsxs)(Ae.a,{elevation:0,sx:{p:3,borderRadius:0,background:"#4E426D"},children:[Object($.jsx)(f.a,{src:null===t||void 0===t?void 0:t.photoURL,alt:null===t||void 0===t?void 0:t.email,sx:{width:70,height:70,m:"0 auto"}}),Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:18,textAlign:"center",mt:1,color:"#fff"},children:null===t||void 0===t?void 0:t.displayName}),(null===t||void 0===t?void 0:t.profession)&&Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:14,textAlign:"center",mt:1,color:"whitesmoke"},children:t.profession}),(null===t||void 0===t?void 0:t.adress)&&Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:13,textAlign:"center",mt:1,color:"whitesmoke"},children:t.adress}),Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:16,mt:3,borderBottom:"2px solid #5C4F81",pb:1,mb:2,color:"whitesmoke"},children:"Contact Information"}),Object($.jsxs)(Fe.a,{sx:{display:"flex",alignItems:"center",gap:2,my:1},children:[Object($.jsx)(ie.a,{sx:{fontSize:18,color:"whitesmoke",background:"#5C4F81"},children:Object($.jsx)(ke.b,{})}),Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:13,color:"whitesmoke"},children:null===t||void 0===t?void 0:t.email})]}),(null===t||void 0===t?void 0:t.phone)&&Object($.jsxs)(Fe.a,{sx:{display:"flex",alignItems:"center",gap:2,my:2},children:[Object($.jsx)(ie.a,{sx:{fontSize:18,color:"whitesmoke",background:"#5C4F81"},children:Object($.jsx)(u.b,{})}),Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:13,color:"whitesmoke"},children:null===t||void 0===t?void 0:t.phone})]}),Object($.jsx)("p",{style:{borderBottom:"2px solid #5C4F81"}}),Object($.jsxs)(m.a,{variant:"h6",sx:{fontSize:14,letterSpacing:1,color:"whitesmoke"},children:["Attachment (",n.length,")"]}),o&&Object($.jsx)(Fe.a,{className:"attachment",children:[...new Array(3)].map(((e,t)=>Object($.jsx)(_e.a,{spacing:1,children:Object($.jsx)(se.a,{variant:"rectangular",sx:{height:60,width:70,borderRadius:2}})},t)))}),!o&&Object($.jsx)(Fe.a,{className:"attachment",children:a.map((e=>""!==e.picture&&Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.picture,sx:{height:60,width:70,borderRadius:2,mb:2,boxShadow:1}},e._id)))})]})})},Ge=a(678),ze=a(689),Pe=a(690),Be=a(343);var Te=e=>{let{onlineUsers:t}=e;const{selectedGroup:a,allUsers:s,groupChat:n}=k((e=>e.data)),[i,l]=Object(o.useState)([]),r=n.filter((e=>e.picture));Object(o.useEffect)((()=>{const e=[];for(let o=0;o<(null===a||void 0===a||null===(t=a.groupMembers)||void 0===t?void 0:t.length);o++){var t;const n=null===a||void 0===a?void 0:a.groupMembers[o],i=s.find((e=>e.uid===n));e.push(i)}l(e)}),[a]);const c={mb:2,pb:.5,display:"flex",gap:4,p:1,alignItems:"center",background:"#5C4F81",borderRadius:2};return Object($.jsxs)(Ae.a,{elevation:3,sx:{p:3,borderRadius:0,background:"#4E426D",boxShadow:0},children:[Object($.jsx)(f.a,{src:null===a||void 0===a?void 0:a.coverPhoto,alt:"groupImage",sx:{width:150,height:100,borderRadius:2,m:"0 auto",boxShadow:1}}),Object($.jsx)(m.a,{variant:"h6",sx:{mt:1,fontWeight:"bold",letterSpacing:1,textAlign:"center",color:"#fff"},children:null===a||void 0===a?void 0:a.groupName}),Object($.jsxs)(Ge.a,{defaultExpanded:!0,sx:{mt:2,background:"#4E426D"},children:[Object($.jsx)(ze.a,{expandIcon:Object($.jsx)(Be.a,{style:{color:"whitesmoke"}}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object($.jsx)(m.a,{sx:{color:"#fff"},children:"Group Members"})}),Object($.jsx)(Pe.a,{children:null===i||void 0===i?void 0:i.map((e=>Object($.jsxs)(x.a,{sx:c,children:[t.includes(e.uid)?Object($.jsx)(te,{width:40,height:40,photoURL:null===e||void 0===e?void 0:e.photoURL}):Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName,sx:{border:"1px solid #4E426D"}}),Object($.jsx)(m.a,{variant:"body2",sx:{fontSize:17,color:"whitesmoke"},children:null===e||void 0===e?void 0:e.displayName})]},e._id)))})]}),Object($.jsxs)(m.a,{variant:"h6",sx:{fontSize:15,letterSpacing:1,fontWeight:"bold",mt:1.5,color:"whitesmoke"},children:["Attachment (",null===r||void 0===r?void 0:r.length,")"]}),Object($.jsx)(x.a,{className:"attachment",children:n.map((e=>""!==e.picture&&Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.picture,sx:{height:70,width:80,borderRadius:2,mb:2,boxShadow:1}},e._id)))})]})};const Ve={xs:"100%",sm:"60%",md:350},We=e=>{let{roomId:t,group:a,openSidebar:o,onlineUsers:n}=e;const[i,l]=s.a.useState(null),r=Boolean(i),{openDetailsSection:c,selectedUser:d}=k((e=>null===e||void 0===e?void 0:e.data)),[u,j]=s.a.useState(!1),b=()=>{j(!1)},p=y(),x={fontSize:16,color:"#fff"},m={mr:7,background:"#5C4F81"};return Object($.jsxs)($.Fragment,{children:[!a&&Object($.jsx)(ie.a,{sx:m,children:Object($.jsx)(Ue.a,{id:"basic-button","aria-controls":r?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":r?"true":void 0,onClick:e=>{l(e.currentTarget)},sx:x})}),Object($.jsx)(ie.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:()=>{j(!0)},sx:{...r&&{display:"none"},display:{lg:"none"},color:"#fff",background:"#5C4F81"},children:Object($.jsx)(Ie.a,{sx:x})}),Object($.jsxs)(h.a,{onClose:b,sx:{width:Ve,flexShrink:0,"& .MuiDrawer-paper":{width:Ve,background:"#4E426D"},display:{xs:"block",lg:"none"}},variant:"persistent",anchor:"right",open:u,children:[Object($.jsx)(O.a,{onClick:b,sx:{mt:3,color:"#fff",ml:1}}),11!==o&&Object($.jsx)(Me,{user:d}),11===o&&Object($.jsx)(Te,{onlineUsers:n})]}),c?Object($.jsx)(ie.a,{id:"expand_icon",onKeyPress:e=>{"f"===e.key&&p(H())},onClick:()=>{p(H()),localStorage.setItem("openDrawer","true")},sx:m,children:Object($.jsx)(Ie.a,{sx:x})}):Object($.jsx)(ie.a,{id:"expand_icon",onKeyPress:e=>{"f"===e.key&&p(J())},onClick:()=>{p(J()),localStorage.setItem("openDrawer","false")},sx:{mr:7,background:"#5C4F81"},children:Object($.jsx)(Ie.a,{sx:x})}),Object($.jsx)(Re.a,{id:"basic-menu",anchorEl:i,open:r,onClose:()=>{l(null)},sx:{"& .MuiPaper-root":{backgroundColor:"#5C4F81",color:"#fff"}},MenuListProps:{"aria-labelledby":"basic-button"},children:Object($.jsxs)(Ne.a,{sx:{letterSpacing:1,fontSize:14},onClick:()=>{p(D(t))},children:[Object($.jsx)(De.a,{sx:{fontSize:16,mr:.5}}),"DELETE ALL DATA"]})})]})};var Ye=a(675);function Ke(e){let{typeingUser:t,roomId:a}=e;const{loginUser:o}=k((e=>e.data));return Object($.jsx)($.Fragment,{children:Object($.jsx)(x.a,{children:(null===t||void 0===t?void 0:t.name)&&(null===t||void 0===t?void 0:t.uid)!==o.uid&&a===(null===t||void 0===t?void 0:t.roomId)&&Object($.jsx)(x.a,{id:"typeing_user",children:Object($.jsxs)(Ye.a,{id:"list_item",children:[Object($.jsx)(f.a,{sx:{width:18,height:18},src:null===t||void 0===t?void 0:t.photo,alt:null===t||void 0===t?void 0:t.name}),Object($.jsxs)(m.a,{sx:{color:"#fff"},variant:"caption",children:[null===t||void 0===t?void 0:t.name," is typeing..."]})]})})})})}var qe=function(e){let{socket:t,roomId:a,onlineUsers:s}=e;const{user:n}=pe(),{register:i,watch:l,setValue:r}=Object(xe.a)(),{selectedUser:c,messageDataLoading:u,deleteTextLoading:j,allMessageDeleteLoading:b,loginUser:h}=k((e=>e.data)),[p,g]=Object(o.useState)(""),[v,O]=Object(o.useState)(!1),[y,w]=Object(o.useState)(""),[S,U]=Object(o.useState)([]),[E,I]=Object(o.useState)({}),[L,D]=Object(o.useState)(!1),[R,N]=Object(o.useState)(0),[A]=Object(o.useState)(new Audio("../../utlis/message.mp3"));Object(o.useEffect)((()=>{(async()=>{try{await C.a.get("http://localhost:8080/chat/".concat(a)).then((e=>{U(e.data)}));const e=S.filter((e=>!e.read));R>0&&await F(),N(e.length)}catch(e){console.error(e)}})()}),[a,c,j,b]);const _=async()=>{D(!0);const e={roomId:parseInt(a),message:p,image:n.photoURL,userId:n.uid,picture:y,read:!1,time:Date.now()};try{await C.a.post("http://localhost:8080/chat",e),console.log(e),D(!1),w("")}catch(o){console.error(o)}await t.current.emit("send_message",e),await t.current.emit("chatSound"),U((t=>[...t,e])),w(""),g("")};async function F(){try{const e=await C.a.put("http://localhost:8080/chat/read_messages?roomId=".concat(a));console.log("object",e)}catch(e){console.log(e)}}Object(o.useEffect)((()=>{const e=l("picFile");if(null!==e&&void 0!==e&&e.length){let t=new FormData;t.set("key","18b523a65ed553a3bb7441153cbee867"),t.append("image",e[0]),O(!0),C()({method:"post",url:"https://api.imgbb.com/1/upload",data:t}).then((e=>{w(e.data.data.url),r("picFile",e.data.data.url)})).finally((()=>O(!1)))}}),[l("picFile")]),Object(o.useEffect)((()=>{var e;const a=e=>{const t=[...S,e];I({}),U(t),e.userId===c.uid&&F()};return null===(e=t.current)||void 0===e||e.on("recive_message",a),()=>{var e;null===(e=t.current)||void 0===e||e.off("recive_message",a)}}),[S,c,t]);const M={name:h.displayName,photo:h.photoURL,roomId:a,uid:h.uid};return Object(o.useEffect)((()=>{var e,a,o,s;const n=()=>{null===t||void 0===t||t.current.emit("typing",{})},i=e=>{I(e)},l=e=>{const t=null===S||void 0===S?void 0:S.filter((t=>t._id!==e._id));U(t)};return null===(e=document)||void 0===e||null===(a=e.getElementById("message_field"))||void 0===a||a.addEventListener("focusout",n),null===t||void 0===t||null===(o=t.current)||void 0===o||o.on("typing",i),null===t||void 0===t||null===(s=t.current)||void 0===s||s.on("deleteMessage",l),()=>{var e,a,o,s;null===(e=document)||void 0===e||null===(a=e.getElementById("message_field"))||void 0===a||a.removeEventListener("focusout",n),null===t||void 0===t||null===(o=t.current)||void 0===o||o.off("typing",i),null===t||void 0===t||null===(s=t.current)||void 0===s||s.off("deleteMessage",l)}}),[t,S,p]),Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(x.a,{sx:{boxShadow:0,width:"100%",background:"#4E426D",ml:{xs:0,md:4},mt:{xs:0,md:4},mb:0,p:1.3,display:{xs:"block",md:"flex"},justifyContent:"space-between"},children:[Object($.jsxs)(x.a,{sx:{display:"flex",gap:2},children:[Object($.jsx)(f.a,{alt:"userimage",sx:{width:{xs:"none",md:"block"}},src:c.photoURL}),Object($.jsxs)("span",{children:[Object($.jsx)(m.a,{sx:{fontSize:15,color:"#fff"},variant:"h6",children:c.displayName}),Object($.jsx)("small",{style:{color:"#ddd6d6"},children:s.includes(c.uid)?"Online":""})]})]}),Object($.jsx)(x.a,{sx:{mt:.5},children:Object($.jsx)(We,{roomId:a})})]}),Object($.jsxs)(x.a,{sx:{p:4},children:[u&&Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:{xs:"30rem",md:"34rem",xl:680}},children:Object($.jsx)(ge,{})}),Object($.jsxs)(x.a,{className:"message_container",sx:{height:{xs:"30rem",md:"34rem",lg:400,xl:550}},children:[0===(null===S||void 0===S?void 0:S.length)&&!u&&Object($.jsxs)(x.a,{className:"",sx:{mt:5,height:{xl:680,md:350,lg:400}},children:[Object($.jsx)(f.a,{alt:"userimage",sx:{height:80,width:80,m:"0 auto"},src:c.photoURL}),Object($.jsx)(m.a,{sx:{textAlign:"center",color:"whitesmoke"},variant:"h6",children:c.displayName})]}),!u&&Object($.jsx)(ce.a,{children:S.map((e=>Object($.jsx)(Ce,{messageContent:e,user:n,socket:t,roomId:a,textLoading:L},e._id)))})]})]}),Object($.jsx)(Ke,{roomId:a,typeingUser:E}),!u&&Object($.jsxs)(x.a,{sx:{p:4,mb:4},id:"bottom_nav",children:[""!==y&&Object($.jsx)(x.a,{sx:{position:"absolute",bottom:140},children:Object($.jsx)(f.a,{sx:{width:150,height:100,borderRadius:2,boxShadow:2},alt:"yourselectpicture",src:y})}),Object($.jsx)("textarea",{onKeyPress:()=>{null===t||void 0===t||t.current.emit("typing",M)},onChange:e=>g(e.target.value),placeholder:"Enter a Message",value:p,id:"message_field",style:{width:"100%",height:60,background:"#4E426D",borderRadius:10,marginBottom:5,color:"white",padding:"10px"}}),Object($.jsxs)(x.a,{sx:{mt:0,float:"right"},children:[Object($.jsxs)("label",{htmlFor:"icon-button-file",children:[Object($.jsx)("input",{style:{display:"none"},id:"icon-button-file",accept:"image/*",...i("picFile"),type:"file"}),Object($.jsx)(ie.a,{sx:{background:"#4E426D",color:"#fff",fontSize:18},"aria-label":"upload picture",component:"span",children:Object($.jsx)(d.a,{})})]}),v?Object($.jsx)(ie.a,{sx:{background:"#4E426D",color:"#fff",ml:3,"&:hover":{background:"#4E426D"}},children:Object($.jsx)(le.a,{size:14,sx:{color:"#fff"}})}):Object($.jsx)(ie.a,{onClick:async()=>{""!==y&&""===p&&_(),""!==p&&""===y&&_(),""!==p&&""!==y&&_()},sx:{background:"#4E426D",color:"#fff",fontSize:14,ml:3,"&:hover":{background:"#4E426D"}},children:Object($.jsx)(re.a,{})})]})]})]})},He=a(692),Je=a(691),Qe=a(686);const Xe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:430,bgcolor:"#5C4F81",boxShadow:24,p:3,borderRadius:2,zIndex:90909090};function Ze(e){let{socket:t,handleOpen:a,open:s,handleClose:n,handleAddCreatedGroup:i}=e;const[l,r]=Object(o.useState)(0),[c,d]=Object(o.useState)(new Set),[u,j]=Object(o.useState)(""),{allUsers:b,selectedGroupMembers:h,loginUser:p}=k((e=>e.data)),v=y(),[O,w]=Object(o.useState)(!1),S={borderRadius:2,p:.5,mr:2,borderColor:"#fff",color:"#fff","&:hover":{borderColor:"#fff"}},U={fontSize:17,letterSpacing:1,textAlign:"center",mb:2,color:"#fff"};return Object($.jsx)($.Fragment,{children:Object($.jsx)(Oe.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:()=>{n(),setTimeout((()=>{v(Y(0)),r(0)}),1e3)},closeAfterTransition:!0,BackdropComponent:Qe.a,BackdropProps:{timeout:500},children:Object($.jsx)(g.a,{in:s,children:Object($.jsxs)(x.a,{sx:Xe,children:[0===l&&Object($.jsxs)(x.a,{children:[Object($.jsx)(m.a,{variant:"h6",sx:U,children:"Create a group"}),Object($.jsx)("input",{placeholder:"Search people",id:"search_field",type:"text"}),Object($.jsx)(x.a,{sx:{height:250,overflowY:"scroll"},children:b.map(((e,t)=>(null===p||void 0===p?void 0:p.uid)!==(null===e||void 0===e?void 0:e.uid)&&Object($.jsxs)(x.a,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"space-between",mb:3,background:"#4E426D",p:1,borderRadius:3},children:[Object($.jsxs)(x.a,{sx:{display:"flex",gap:1,alignItems:"center"},children:[Object($.jsx)(f.a,{src:e.photoURL,alt:e.displayName}),Object($.jsx)(m.a,{sx:{fontSize:16,color:"#fff"},variant:"h6",children:e.displayName})]}),h.find((t=>t.uid===e.uid))?Object($.jsx)(oe.a,{sx:S,onClick:()=>{return t=e.uid,void v(B(t));var t},variant:"outlined",children:"REMOVE"}):Object($.jsx)(oe.a,{onClick:()=>(e=>{v(P(e))})(e),sx:S,variant:"outlined",children:"Add"})]})))})]}),1===l&&Object($.jsxs)(x.a,{children:[Object($.jsx)(m.a,{variant:"h6",sx:U,children:"Create a group with"}),Object($.jsx)(Je.a,{max:4,sx:{display:"flex",justifyContent:"center",mb:2},children:h.map((e=>Object($.jsx)(f.a,{alt:null===e||void 0===e?void 0:e.displayName,src:null===e||void 0===e?void 0:e.photoURL})))}),Object($.jsx)("input",{style:{padding:17,width:"90%",borderRadius:5},placeholder:"Group Name",id:"search_field",type:"text",onChange:e=>j(e.target.value)})]}),h.length>0&&0===l&&Object($.jsx)(oe.a,{variant:"contained",sx:{width:"100%",borderRadius:25,position:"relative",background:"#4E426D","&:hover":{background:"#4E426D"}},onClick:()=>{let e=c;var t;t=l,c.has(t)&&(e=new Set(e.values()),e.delete(l)),r((e=>e+1)),d(e)},children:"NEXT"}),1===l&&Object($.jsx)($.Fragment,{children:O?Object($.jsx)(He.a,{sx:{width:"100%",borderRadius:25,position:"relative"},loading:!0,variant:"outlined",children:"Loading..."}):Object($.jsx)(oe.a,{variant:"contained",sx:{width:"100%",borderRadius:25,position:"relative",background:"#4E426D","&:hover":{background:"#4E426D"}},onClick:async()=>{if(""===u)return alert("Please give the group name..");w(!0);const e=[p.uid],a=Math.floor(20298323023e5*Math.random())+1,o={groupId:a,groupName:u,groupMembers:e,coverPhoto:"https://i.postimg.cc/t4SCnxv4/ethan-dow-d-Wa-Bk-AWCxs-A-unsplash-1.jpg"};for(let t of h)e.push(t.uid);try{await C.a.post("http://localhost:8080/group",o),v(Y(0)),n(),r(0),t.current.emit("joinedgroup",o);for(let e of h)await C.a.post("http://localhost:8080/group/saveinuserdata/".concat(e.uid),{groupId:a});await C.a.post("http://localhost:8080/group/saveinuserdata/".concat(p.uid),{groupId:a}),i(o)}catch(s){console.error(s.message)}w(!1)},children:"CREATE GROUP"})})]})})})})}var $e=function(e){var t;let{group:a,handleAddRoomId:o,socket:s,mygroups:n}=e;const i=[],{groupName:l,groupId:r,coverPhoto:c}=a,{allUsers:d,allGroups:u,selectedGroup:j}=k((e=>e.data)),b=y();for(const p of null===a||void 0===a?void 0:a.groupMembers){let e=d.find((e=>e.uid===p));i.push(e)}0===(null===Object||void 0===Object||null===(t=Object.keys(j))||void 0===t?void 0:t.length)&&b(T(n[0]));let h=0;return Object($.jsx)($.Fragment,{children:l&&Object($.jsxs)(x.a,{sx:{display:"flex",gap:1.5,mb:2,p:1,background:a.groupId===(null===j||void 0===j?void 0:j.groupId)?"#5C4F81":"",borderBottom:"2px solid #5C4F81"},onClick:()=>{b(T(a));for(let e=0;e<i.length;e++){const t=i[e],a=null===t||void 0===t?void 0:t.createdAt;h+=parseFloat(a)}o(h),s.current.emit("join_room",h)},children:[Object($.jsx)(f.a,{src:c,alt:l,sx:{borderRadius:1,width:50,height:50,my:.3}}),Object($.jsxs)(x.a,{children:[Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:17,letterSpacing:1,color:"whitesmoke"},children:l}),Object($.jsx)(Je.a,{className:"avatar_container",max:5,sx:{display:"flex",justifyContent:"flex-end"},children:i.map((e=>Object($.jsx)(f.a,{sx:{width:17,height:17},alt:null===e||void 0===e?void 0:e.displayName,src:null===e||void 0===e?void 0:e.photoURL},e._id)))})]})]})})};a(606);var et=e=>{let{socket:t,handleAddRoomId:a}=e;const[n,i]=s.a.useState(!1),[l,r]=Object(o.useState)([]),c=y(),{loginUser:d,allUsers:u,allGroups:j,groupsDataLoading:b}=k((e=>null===e||void 0===e?void 0:e.data)),h=null===u||void 0===u?void 0:u.find((e=>(null===e||void 0===e?void 0:e.uid)===(null===d||void 0===d?void 0:d.uid)));Object(o.useEffect)((()=>{if(null===h||void 0===h||!h.groups)return;const e=[];for(let t of null===h||void 0===h?void 0:h.groups){const a=null===j||void 0===j?void 0:j.find((e=>e.groupId===t));e.push(a)}r(e),c(K(e))}),[j,null===h||void 0===h?void 0:h.groups,c]),Object(o.useEffect)((()=>{var e;null===(e=t.current)||void 0===e||e.on("joinedgroup",(function(e){r((t=>[...t,e])),console.log("joined",e)}))}),[t,c]);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("button",{type:"button",onClick:()=>i(!0),className:"creatGroupBtn",children:"CREATE GROUP"}),0!==(null===l||void 0===l?void 0:l.length)&&!b&&Object($.jsx)(x.a,{sx:{height:550,overflowY:"scroll"},children:l.map((e=>Object($.jsx)($e,{group:e,mygroups:l,socket:t,handleAddRoomId:a},null===e||void 0===e?void 0:e._id)))}),b&&Object($.jsx)(x.a,{children:[...new Array(5)].map(((e,t)=>Object($.jsx)(se.a,{sx:{height:90}},t)))}),!b&&0===l.length&&Object($.jsx)(m.a,{sx:{mb:2,textAlign:"center",color:"whitesmoke",letterSpacing:2,fontSize:"1.5rem"},variant:"h5",children:"You've not joined any group yet."}),Object($.jsx)(Ze,{socket:t,open:n,handleClose:()=>i(!1),handleAddCreatedGroup:e=>{r((t=>[...t,e]))}})]})};var tt=e=>{const{groupId:t,socket:a,openSidebar:s,onlineUsers:n}=e,{loginUser:i,selectedGroup:l,deleteTextLoading:r,allMessageDeleteLoading:c}=k((e=>e.data)),[u,j]=Object(o.useState)(""),[b,h]=Object(o.useState)(""),[p,g]=Object(o.useState)(!1),{register:v,watch:O,setValue:w}=Object(xe.a)(),[S,U]=Object(o.useState)([]),[E,I]=Object(o.useState)(!0),[L,D]=Object(o.useState)([]),R=y();Object(o.useEffect)((()=>{I(!0),C.a.get("http://localhost:8080/group/groupchat/".concat(l.groupId)).then((e=>{I(!1),R(V(e.data)),U(e.data)}))}),[t,l,c]);const N=async()=>{const e={message:u,image:i.photoURL,userId:i.uid,picture:b,time:Date.now(),roomId:t,groupId:l.groupId};try{await C.a.post("http://localhost:8080/chat",e),h("")}catch(o){console.error(o)}await a.current.emit("send_message",e),U((t=>[...t,e])),h(""),j("")};Object(o.useEffect)((()=>{const e=O("picFile");if(null!==e&&void 0!==e&&e.length){let t=new FormData;t.set("key","18b523a65ed553a3bb7441153cbee867"),t.append("image",e[0]),g(!0),C()({method:"post",url:"https://api.imgbb.com/1/upload",data:t}).then((e=>{h(e.data.data.url),w("pic",e.data.data.url)})).finally((()=>g(!1)))}}),[O("picFile")]),Object(o.useEffect)((()=>{var e;null===(e=a.current)||void 0===e||e.on("recive_message",(e=>{const t=[...S,e];D([]),U(t)}))}),[a,S]);const A={name:i.displayName,photo:i.photoURL,roomId:t,uid:i.uid};Object(o.useEffect)((()=>{var e,t,o,s,n;(null===(e=document)||void 0===e||null===(t=e.getElementById("message_field"))||void 0===t||t.addEventListener("focusout",(()=>{null===a||void 0===a||a.current.emit("typing",{})})),null===a||void 0===a||null===(o=a.current)||void 0===o||o.on("typing",(function(e){D([...L,e])})),null===a||void 0===a||null===(s=a.current)||void 0===s||s.on("deleteMessage",(function(e){const t=null===S||void 0===S?void 0:S.filter((t=>t._id!==e._id));U(t)})),""===u)&&(null===a||void 0===a||null===(n=a.current)||void 0===n||n.emit("typing",{}))}),[a,S]);return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(x.a,{sx:{boxShadow:0,width:"100%",background:"#4E426D",ml:{xs:0,md:4},mt:{xs:0,md:4},mb:0,p:1.3,display:{xs:"block",md:"flex"},justifyContent:"space-between"},children:[Object($.jsxs)(x.a,{sx:{display:"flex",gap:2},children:[Object($.jsx)(f.a,{alt:"userimage",src:l.coverPhoto}),Object($.jsxs)("span",{children:[Object($.jsx)(m.a,{sx:{fontSize:15,color:"#fff"},variant:"h6",children:l.groupName}),Object($.jsx)("small",{style:{color:"#ddd6d6"}})]})]}),Object($.jsx)(x.a,{sx:{mt:.5},children:Object($.jsx)(We,{openSidebar:s,group:!0,onlineUsers:n})})]}),Object($.jsxs)(x.a,{sx:{p:4},children:[E&&Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"485px"},children:Object($.jsx)(ge,{})}),Object($.jsxs)(x.a,{className:"message_container",sx:{height:{xs:"30rem",md:"34rem",lg:400,xl:550}},children:[0===(null===S||void 0===S?void 0:S.length)&&!E&&Object($.jsxs)(x.a,{sx:{mt:5},children:[Object($.jsx)(f.a,{alt:"userimage",sx:{height:80,width:80,m:"0 auto"},src:l.coverPhoto}),Object($.jsx)(m.a,{sx:{textAlign:"center",color:"whitesmoke"},variant:"h6",children:l.groupName})]}),!E&&Object($.jsx)(ce.a,{children:S.map((e=>Object($.jsx)(Ce,{messageContent:e,user:i},e._id)))})]})]}),Object($.jsx)(x.a,{children:null===L||void 0===L?void 0:L.map((e=>Object($.jsx)(x.a,{children:(null===e||void 0===e?void 0:e.name)&&t===(null===e||void 0===e?void 0:e.roomId)&&Object($.jsx)(x.a,{id:"typeing_user",children:Object($.jsxs)(Ye.a,{id:"list_item",children:[Object($.jsx)(f.a,{sx:{width:18,height:18},src:null===e||void 0===e?void 0:e.photo,alt:null===e||void 0===e?void 0:e.name}),Object($.jsxs)(m.a,{sx:{color:"#fff"},variant:"caption",children:[null===e||void 0===e?void 0:e.name," is typeing..."]})]})})})))}),!E&&Object($.jsxs)(x.a,{sx:{p:4,mb:3.5},id:"bottom_nav",children:[""!==b&&Object($.jsx)(x.a,{sx:{position:"absolute",bottom:140},children:Object($.jsx)(f.a,{sx:{width:150,height:100,borderRadius:2,boxShadow:2},alt:"yourselectpicture",src:b})}),Object($.jsx)("textarea",{onKeyPress:async()=>{try{await(null===a||void 0===a?void 0:a.current.emit("typing",A))}catch(e){console.log(e.message)}},onChange:e=>j(e.target.value),placeholder:"Enter a Message",value:u,id:"message_field",style:{width:"100%",height:60,background:"#4E426D",borderRadius:10,marginBottom:5,color:"white",padding:"10px"}}),Object($.jsxs)(x.a,{sx:{mt:0,float:"right"},children:[Object($.jsxs)("label",{htmlFor:"icon-button-file",children:[Object($.jsx)("input",{style:{display:"none"},id:"icon-button-file",accept:"image/*",...v("picFile"),type:"file"}),Object($.jsx)(ie.a,{sx:{background:"#4E426D",color:"#fff",fontSize:18},"aria-label":"upload picture",component:"span",children:Object($.jsx)(d.a,{})})]}),p?Object($.jsx)(ie.a,{sx:{background:"#4E426D",color:"#fff",ml:3,"&:hover":{background:"#4E426D"}},children:Object($.jsx)(le.a,{size:14,sx:{color:"#fff"}})}):Object($.jsx)(ie.a,{onClick:async()=>{""!==b&&""===u&&N(),""!==u&&""===b&&N(),""!==u&&""!==b&&N()},sx:{background:"#4E426D",color:"#fff",fontSize:14,ml:3,"&:hover":{background:"#4E426D"}},children:Object($.jsx)(re.a,{})})]})]})]})};var at=e=>{let{socket:t}=e;const{allUsers:a,usersDataLoading:s,searchText:n,loginUser:i}=k((e=>e.data)),[l,r]=Object(o.useState)(!1),[c,d]=Object(o.useState)(!1),[u,j]=Object(o.useState)(""),b=y(),h=a.find((e=>e.uid===(null===i||void 0===i?void 0:i.uid))),p=e=>{var a;j(e.uid),a=e,r(!0),C.a.post("http://localhost:8080/users/addcontract/".concat(null===i||void 0===i?void 0:i.uid),{uid:a.uid}).then((e=>{var a;null===t||void 0===t||null===(a=t.current)||void 0===a||a.emit("addedUser",{userId:null===i||void 0===i?void 0:i.uid}),r(!1),d(!0),b(E())}))};let g=a.filter((e=>(null===e||void 0===e?void 0:e.uid)!==(null===h||void 0===h?void 0:h.uid)));const v=g.filter((e=>{var t,a;return null===e||void 0===e||null===(t=e.displayName)||void 0===t||null===(a=t.toLowerCase())||void 0===a?void 0:a.includes(null===n||void 0===n?void 0:n.toLowerCase())})),O={borderColor:"#fff",color:"#fff","&:hover":{borderColor:"#fff"}},w={display:"flex",alignItems:"center",mb:2,p:1,borderRadius:2,justifyContent:"space-between",borderBottom:"2px solid #5C4F81",mr:2};let S;return Object($.jsxs)($.Fragment,{children:[s&&0===g.length&&Object($.jsx)(x.a,{children:[...new Array(5)].map(((e,t)=>Object($.jsx)(se.a,{sx:{height:80}})))}),!s&&0===g.length&&Object($.jsx)(x.a,{children:Object($.jsx)(m.a,{sx:{mb:2,textAlign:"center",color:"whitesmoke",letterSpacing:2,fontSize:"1.5rem"},variant:"h5",children:"No users."})}),v.map(((e,t)=>{var a;return Object($.jsxs)(x.a,{sx:w,children:[Object($.jsx)("small",{style:{display:"none"},children:S=null===h||void 0===h||null===(a=h.contracts)||void 0===a?void 0:a.find((t=>t===(null===e||void 0===e?void 0:e.uid)))}),Object($.jsx)("br",{}),Object($.jsx)(f.a,{alt:"user photo",sx:{width:45,height:45},src:e.photoURL}),Object($.jsxs)("span",{children:[Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:16,color:"#fff"},children:e.displayName}),Object($.jsx)(m.a,{variant:"h6",sx:{fontSize:11,color:"#9881d6"},children:e.email})]}),l&&u===(null===e||void 0===e?void 0:e.uid)?Object($.jsx)(He.a,{loading:!0,variant:"outlined",children:"Submit"}):Object($.jsx)("span",{children:S!==(null===e||void 0===e?void 0:e.uid)?Object($.jsx)(oe.a,{sx:O,variant:"outlined",onClick:()=>p(e),children:"ADD+"}):Object($.jsx)(oe.a,{sx:O,disabled:!0,variant:"outlined",children:"ADDED"})})]},e._id)}))]})},ot=a(346),st=a.n(ot);const nt=()=>{const{loginUser:e}=k((e=>e.data)),{logOut:t}=pe(),[a,o]=s.a.useState(null),n=Boolean(a),i={display:"flex",justifyContent:"center"};return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(x.a,{children:[Object($.jsx)(ie.a,{id:"basic-button",sx:{float:"right",background:"#5C4F81",color:"white",m:1},"aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:e=>{o(e.currentTarget)},children:Object($.jsx)(r.b,{})}),Object($.jsx)(x.a,{children:!window.navigator.onLine&&Object($.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",boxShadow:2,width:120,borderRadius:5,pl:1,color:"white",background:"red"},children:[Object($.jsx)(st.a,{sx:{fontSize:16}}),Object($.jsx)(m.a,{variant:"caption",children:"You're offline"})]})})]}),Object($.jsxs)(Re.a,{sx:{"& .MuiPaper-root":{backgroundColor:"#5C4F81",color:"#fff"}},id:"basic-menu",anchorEl:a,open:n,onClose:()=>{o(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[Object($.jsx)(Ne.a,{sx:{display:"flex",justifyContent:"center"},children:Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.photoURL,alt:""})}),Object($.jsx)(Ne.a,{sx:i,children:null===e||void 0===e?void 0:e.displayName}),Object($.jsx)(Ne.a,{sx:i,children:null===e||void 0===e?void 0:e.email}),Object($.jsx)(Ne.a,{onClick:t,sx:i,style:{background:"#463a63"},children:"Log out"})]})]})},it={xs:"80%",sm:"60%",md:350};var lt=function(){const{convertationUsers:e,joinedGroups:t,selectedUser:a,loginUser:s,openDetailsSection:n,usersDataLoading:i}=k((e=>e.data)),l=y(),[v,f]=Object(o.useState)(1),w=Object(o.useRef)(),[C,S]=Object(o.useState)(0),[E,I]=Object(o.useState)(),[L,D]=Object(o.useState)(1),R=Object(b.p)(),[N,A]=Object(o.useState)(!1),[_,F]=Object(o.useState)(!1),[M,G]=Object(o.useState)([]);if(Object(o.useEffect)((()=>{(async()=>{try{F(!0),w.current=j.a.connect("http://localhost:8080"),w.current.removeAllListeners(),w.current.emit("user_connected",s.uid),P(w)}catch(e){console.error("Error connecting to socket:",e)}finally{F(!1)}})()}),[s.uid]),0===Object.keys(a).length)for(const o of e)l(z(o));function P(e){const t=()=>{_?setTimeout(t,1e3):e.current.on("updateUserStatus",(t=>{const a=Object.keys(t);console.log("onlineUserIds",a),G(a),P(e)}))};t()}Object(o.useEffect)((()=>{if(3!==v){const e=parseFloat(s.createdAt)+parseFloat(a.createdAt);!0===isNaN(E)?I(e):(I(e),l(U(e)),e===E&&w.current.emit("join_room",E))}}),[a,E,w.current]);const B=e=>{S(e)},T=()=>{A(!0),D(10)};return _?Object($.jsx)("h1",{children:"Loading.."}):Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(h.a,{sx:{width:it,flexShrink:0,"& .MuiDrawer-paper":{width:it,background:"#4E426D"},display:{xs:"block",lg:"none"}},variant:"persistent",anchor:"left",open:N,children:[Object($.jsx)(O.a,{onClick:()=>{A(!1)},sx:{mt:3,color:"#fff",ml:1}}),10===L&&Object($.jsx)(at,{socket:w}),11===L&&Object($.jsx)(et,{socket:w,handleAddRoomId:B})]}),Object($.jsxs)(p.a,{container:!0,id:"home",children:[Object($.jsxs)(p.a,{item:!0,xs:3,md:4,lg:3,xl:2.5,id:"sidebar",children:[Object($.jsx)(nt,{}),Object($.jsx)(x.a,{sx:{px:2,pb:1},children:Object($.jsx)("input",{onChange:e=>l(q(e.target.value)),placeholder:"Search People for Messages",className:"search_input",type:"search"})}),Object($.jsxs)(x.a,{sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between ",mt:1,mb:4,background:"#5C4F81"},children:[Object($.jsx)("span",{onClick:()=>{f(1),D(10)},className:1===v?"page_active":"top_nav",children:Object($.jsx)(r.a,{})}),Object($.jsx)("span",{id:"mobile_icon",onClick:T,className:"top_nav",children:Object($.jsx)(c.b,{})}),Object($.jsx)("span",{id:"mobile_icon",onClick:()=>{T(),D(11)},className:"top_nav",children:Object($.jsx)(d.b,{})}),Object($.jsx)("span",{id:"visible_icon",onClick:()=>f(2),className:2===v?"page_active":"top_nav",children:Object($.jsx)(c.b,{})}),Object($.jsx)("span",{id:"visible_icon",onClick:()=>f(3),className:3===v?"page_active":"top_nav",children:Object($.jsx)(d.b,{})}),Object($.jsx)("span",{className:"top_nav",children:Object($.jsx)(u.a,{onClick:()=>R("/setting/".concat(s.uid))})})]}),1===v&&!_&&Object($.jsx)(ne,{selectChatBox:()=>{f(1),D(10)},handleDrawerOpen:T,addConverationRoute:()=>{f(2)},socket:w,roomId:E,onlineUsers:M,uid:null===a||void 0===a?void 0:a.uid}),2===v&&Object($.jsx)(at,{socket:w}),3===v&&Object($.jsx)(et,{socket:w,handleAddRoomId:B})]}),0===(null===e||void 0===e?void 0:e.length)&&3!==v&&Object($.jsx)(p.a,{item:!0,xs:9,md:8,lg:9,xl:9.5,sx:{backgroundColor:"#5C4F81",width:"100vh",transition:"1s",height:"100vh"},children:!i&&Object($.jsx)(m.a,{id:"emptyContactText",variant:"h5",children:"Your contact list is empty. Please add people to start chatting. Happy chatting!"})}),0===(null===t||void 0===t?void 0:t.length)&&3===v&&!i&&Object($.jsx)(p.a,{item:!0,xs:9,md:8,lg:9,xl:9.5,sx:{backgroundColor:"#5C4F81",width:"100%",transition:"1s",height:"100vh"},children:!i&&Object($.jsx)(m.a,{id:"emptyGroupText",variant:"h5",children:"You have not joined any group yet. Create a group or wait for someone to invite you to join."})}),0===(null===e||void 0===e?void 0:e.length)&&0!==t.length&&!i&&Object($.jsx)(p.a,{item:!0,xs:9,md:8,lg:n?6:9,xl:n?7:9.5,sx:{backgroundColor:"#5C4F81",width:"100%",transition:"1s"},children:3===v&&Object($.jsx)(tt,{onlineUsers:M,groupId:C,socket:w,openSidebar:L})}),(null===e||void 0===e?void 0:e.length)>0&&Object($.jsxs)(p.a,{item:!0,xs:9,md:8,lg:n?6:9,xl:n?7:9.5,sx:{backgroundColor:"#5C4F81",width:"100%",transition:"1s"},children:[3!==v&&11!==L&&Object($.jsx)(qe,{socket:w,onlineUsers:M,selectedUser:a,roomId:E}),(3===v||11===L)&&Object($.jsx)(tt,{groupId:C,onlineUsers:M,socket:w,openSidebar:L})]}),n&&e.length>0&&!i&&Object($.jsx)(g.a,{in:n,children:Object($.jsxs)(p.a,{item:!0,md:3,xs:6,lg:3,xl:2.5,sx:{background:"#4E426D",display:{xs:"none",lg:"block"}},children:[3!==v&&Object($.jsx)(Me,{user:a}),3===v&&Object($.jsx)(Te,{onlineUsers:M})]})}),0===(null===e||void 0===e?void 0:e.length)&&0!==t.length&&!i&&Object($.jsx)(g.a,{in:n,children:Object($.jsx)(p.a,{item:!0,md:3,xs:6,lg:3,xl:2.5,sx:{background:"#4E426D",display:{xs:"none",lg:"block"}},children:3===v&&Object($.jsx)(Te,{onlineUsers:M})})})]})]})},rt=a(673),ct=a(347);var dt=()=>{const{handleGoogleSign:e,signUpWithEmail:t,processing:a,logInWithEmail:s,error:n}=pe(),i=Object(b.n)(),[l,r]=Object(o.useState)(!1),d=Object(o.useRef)(null),u=Object(o.useRef)(null),j=Object(b.p)(),h=Object(o.useRef)(null);return Object($.jsxs)(x.a,{sx:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(to right, #4E426D, #3b3153)"},children:[Object($.jsxs)(Ae.a,{elevation:3,sx:{width:{xs:300,md:350},p:3,background:"#5C4F81"},className:"login_form",children:[Object($.jsx)(x.a,{className:"logo_container",children:Object($.jsx)("span",{className:"logo",children:Object($.jsx)(c.a,{className:"icon"})})}),Object($.jsx)(m.a,{variant:"h6",children:l?"Sign Up":"LOGIN"}),Object($.jsxs)("form",{onSubmit:e=>{var a,o,n;if(l)t(null===d||void 0===d||null===(a=d.current)||void 0===a?void 0:a.value,null===u||void 0===u||null===(o=u.current)||void 0===o?void 0:o.value,null===h||void 0===h||null===(n=h.current)||void 0===n?void 0:n.value);else if(!l){var i,r;s(null===u||void 0===u||null===(i=u.current)||void 0===i?void 0:i.value,null===h||void 0===h||null===(r=h.current)||void 0===r?void 0:r.value)}e.preventDefault()},children:[l&&Object($.jsx)("input",{ref:d,required:!0,placeholder:"Name",type:"text"}),Object($.jsx)("input",{ref:u,required:!0,placeholder:"Email",type:"email"}),Object($.jsx)("input",{ref:h,required:!0,placeholder:"Password",type:"password"}),!l&&Object($.jsx)("span",{onClick:()=>j("/reseatpass"),className:"login_link",children:"Forget password ?"}),a?Object($.jsx)("button",{id:"login_button",type:"submit",children:"Loading..."}):Object($.jsx)("button",{id:"login_button",type:"submit",children:l?"REGISTER":"LOGIN"})]}),!l&&Object($.jsx)("span",{className:"login_link",onClick:()=>r(!0),children:"Create an account ?"}),l&&Object($.jsx)("span",{className:"login_link",onClick:()=>r(!1),children:"Have an account ? Login "}),Object($.jsx)("span",{style:{display:"flex",justifyContent:"center"},children:Object($.jsx)(oe.a,{onClick:()=>{e(i)},variant:"outlined",sx:{borderColor:"#453A61",p:1,py:1.5,fontSize:17,"&:hover":{borderColor:"#453A61"},margin:"0 auto"},children:Object($.jsx)(ct.a,{})})})]}),Object($.jsx)(rt.a,{open:Boolean(n),autoHideDuration:5e3,message:n})]})};var ut=e=>{let{children:t}=e;const{user:a,loading:o}=pe(),{loginUser:s}=k((e=>e.data));let n=Object(b.n)();return o?Object($.jsx)(se.a,{animation:"wave",variant:"rectangular",sx:{width:"100vw",height:"100vh"}}):s.uid?Object($.jsx)($.Fragment,{children:t}):Object($.jsx)(b.a,{to:"/login",state:{from:n}})},jt=a(693),bt=a(669),ht=a(694),pt=a(348);var xt=e=>{let{user:t}=e;const{updatePhotoAndName:a}=pe(),s=Object(o.useRef)(null),n=Object(o.useRef)(null),i=Object(o.useRef)(null),l=Object(o.useRef)(null),{loginUser:r,updateUserInfo:c}=k((e=>e.data)),d=y(),u={borderColor:"#beb8b8",color:"whitesmoke","&:hover":{borderColor:"#beb8b8"}};return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("span",{style:{display:"flex",marginBottom:30},children:[Object($.jsx)("input",{className:"setting_input",type:"text",ref:s,defaultValue:null===t||void 0===t?void 0:t.displayName}),Object($.jsx)(oe.a,{onClick:()=>{const e=s.current.value;if(e===r.displayName)return;const o={uid:t.uid,name:e};d(R(o)),a(e,r.photoURL)},variant:"outlined",sx:u,children:"SAVE"})]}),Object($.jsxs)("span",{style:{display:"flex",marginBottom:30},children:[Object($.jsx)("input",{placeholder:"Phone number",className:"setting_input",type:"number",ref:n,defaultValue:null===t||void 0===t?void 0:t.phone}),Object($.jsx)(oe.a,{onClick:()=>{const e={uid:t.uid,phone:n.current.value};d(N(e))},variant:"outlined",sx:u,children:"SAVE"})]}),Object($.jsxs)("span",{style:{display:"flex",marginBottom:30},children:[Object($.jsx)("input",{ref:l,placeholder:"Your profession",className:"setting_input",type:"text",defaultValue:null===t||void 0===t?void 0:t.profession}),Object($.jsx)(oe.a,{onClick:()=>{const e={uid:t.uid,profession:l.current.value};d(_(e))},variant:"outlined",sx:u,children:"SAVE"})]}),Object($.jsxs)("span",{style:{display:"flex",marginBottom:30},children:[Object($.jsx)("input",{placeholder:"Your address",ref:i,className:"setting_input",type:"text",defaultValue:null===t||void 0===t?void 0:t.adress}),Object($.jsx)(oe.a,{onClick:()=>{const e={uid:t.uid,adress:i.current.value};d(A(e))},variant:"outlined",sx:u,children:"SAVE"})]}),Object($.jsxs)("span",{style:{display:"flex",marginBottom:0},children:[Object($.jsx)("input",{className:"setting_input",type:"text",disabled:!0,defaultValue:null===t||void 0===t?void 0:t.email}),Object($.jsx)(oe.a,{variant:"outlined",disabled:!0,children:Object($.jsx)(pt.a,{})})]})]})};const mt=()=>{const{loginUser:e,allUsers:t,allGroups:a,groupsDataLoading:o,joinedGroups:s}=k((e=>null===e||void 0===e?void 0:e.data)),n=(null===t||void 0===t||t.find((t=>(null===t||void 0===t?void 0:t.uid)===(null===e||void 0===e?void 0:e.uid))),y(),{color:"whitesmoke",borderColor:"whitesmoke","&:hover":{borderColor:"#5C4F81"}});return Object($.jsx)(x.a,{sx:{height:370,overflowY:"scroll"},children:Object($.jsx)(ce.a,{children:null===s||void 0===s?void 0:s.map((e=>Object($.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,background:"#4E426D",p:1,borderRadius:1},children:[Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.coverPhoto,alt:null===e||void 0===e?void 0:e.groupName,sx:{borderRadius:1}}),Object($.jsx)(m.a,{variant:"body1",children:null===e||void 0===e?void 0:e.groupName}),Object($.jsx)(oe.a,{variant:"outlined",sx:n,children:"LEAVE"})]},e._id)))})})};var gt=()=>{const{convertationUsers:e}=k((e=>e.data)),t={color:"whitesmoke",borderColor:"whitesmoke","&:hover":{borderColor:"#5C4F81"}};return Object($.jsx)(x.a,{sx:{height:370,overflowY:"scroll"},children:Object($.jsx)(ce.a,{children:e.map((e=>Object($.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,background:"#4E426D",p:1,borderRadius:4},children:[Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName}),Object($.jsx)(m.a,{variant:"body1",children:null===e||void 0===e?void 0:e.displayName}),Object($.jsx)(oe.a,{variant:"outlined",sx:t,children:"REMOVE FROM CONTACT"})]},e._id)))})})},vt=a(242),Ot=a.n(vt);a(607);const ft={position:"absolute",top:"15%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#5C4F81",boxShadow:24,p:3};function yt(e){const{children:t,value:a,index:o,...s}=e;return Object($.jsx)("div",{role:"tabpanel",hidden:a!==o,id:"vertical-tabpanel-".concat(o),"aria-labelledby":"vertical-tab-".concat(o),...s,children:a===o&&Object($.jsx)(x.a,{sx:{p:3},children:Object($.jsx)(m.a,{children:t})})})}function kt(){const[e,t]=Object(o.useState)({}),[a,n]=s.a.useState(0),i=[],{userId:l}=Object(b.r)(),{register:r,watch:c}=Object(xe.a)(),[d,u]=Object(o.useState)(!0),{user:j,updatePhotoAndName:h}=pe(),[g,v]=Object(o.useState)(!1),[O,w]=Object(o.useState)(""),{loginUser:S,allUsers:U,allGroups:E,groupsDataLoading:L,updateUserInfo:D}=k((e=>null===e||void 0===e?void 0:e.data)),R=null===U||void 0===U?void 0:U.find((e=>(null===e||void 0===e?void 0:e.uid)===(null===S||void 0===S?void 0:S.uid))),N=y(),[A,_]=Object(o.useState)(!1),[F,z]=s.a.useState(!1);function P(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}Object(o.useEffect)((()=>{var e,t;const a=[];if(0!==(null===R||void 0===R||null===(e=R.contracts)||void 0===e?void 0:e.length)&&null!=(null===R||void 0===R||null===(t=R.contracts)||void 0===t?void 0:t.length)){for(let e=0;e<(null===R||void 0===R||null===(o=R.contracts)||void 0===o?void 0:o.length);e++){var o;const t=null===R||void 0===R?void 0:R.contracts[e],s=U.find((e=>e.uid===t));a.push(s)}N(G(a))}}),[S]),Object(o.useEffect)((()=>{var e;const t={createdAt:null===j||void 0===j||null===(e=j.metadata)||void 0===e?void 0:e.createdAt},a={photoURL:j.photoURL,displayName:j.displayName,uid:j.uid,createdAt:null===t||void 0===t?void 0:t.createdAt,email:j.email,phone:null,adress:null,contracts:[],groups:[],profession:null};if(N(M(a)),N(I()),null!==R&&void 0!==R&&R.groups){for(let e of null===R||void 0===R?void 0:R.groups){const t=null===E||void 0===E?void 0:E.find((t=>t.groupId===e));i.push(t)}N(K(i))}}),[E]),Object(o.useEffect)((()=>{C.a.get("http://localhost:8080/users/singleuser/".concat(l)).then((e=>{t(e.data),u(!1)}))}),[A,D]),Object(o.useEffect)((()=>{const e=c("picFile");if(null===e||void 0===e||!e.length)return;v(!0);let t=new FormData;t.set("key","752d2bbd9a2e4d6a5910df9c191e1643"),t.append("image",e[0]),C()({method:"post",url:"https://api.imgbb.com/1/upload",data:t}).then((e=>{w(e.data.data.url),v(!1)}))}),[c("picFile")]);const B={borderBottom:"1px solid #4E426D",fontWeight:500,color:"black"},T={borderColor:"whitesmoke",display:"block",color:"whitesmoke","&:hover":{borderColor:"whitesmoke"}};return Object($.jsxs)(x.a,{id:"setting_page",children:[d?Object($.jsx)(m.a,{variant:"h6",sx:{p:3,color:"whitesmoke"},children:"Loading..."}):Object($.jsx)(jt.a,{sx:{pt:15,color:"#fff"},children:Object($.jsxs)(p.a,{container:!0,children:[Object($.jsxs)(p.a,{item:!0,xs:12,md:4,lg:3,xl:2.5,sm:4,sx:{boxShadow:3,background:"#5C4F81"},children:[Object($.jsxs)("span",{style:{display:"grid",justifyContent:"center"},children:[Object($.jsx)(f.a,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName,sx:{width:90,height:90,mt:2}}),Object($.jsx)(ie.a,{sx:{background:"#463A63",color:"#fff","&:hover":{background:"#463A63"},mt:-3,ml:7},onClick:()=>z(!0),component:"span",children:Object($.jsx)(Ot.a,{sx:{fontSize:15}})})]}),Object($.jsx)(m.a,{variant:"h6",sx:{textAlign:"center",fontSize:18,letterSpacing:1,mt:1,borderBottom:"3px solid #4E426D",pb:1},children:null===e||void 0===e?void 0:e.displayName}),Object($.jsxs)(bt.a,{orientation:"vertical",variant:"scrollable",value:a,onChange:(e,t)=>{n(t)},"aria-label":"Vertical tabs example",sx:{mt:1},children:[Object($.jsx)(ht.a,{sx:B,label:"Contract Info",...P(0)}),Object($.jsx)(ht.a,{sx:B,label:"My Contracts",...P(1)}),Object($.jsx)(ht.a,{sx:B,label:"joined groups",...P(2)}),Object($.jsx)(ht.a,{sx:B,label:"Account Setting",...P(3)}),D&&Object($.jsx)(m.a,{variant:"body2",sx:{m:1},children:"Loading..."})]})]}),Object($.jsxs)(p.a,{item:!0,xs:12,sm:8,md:8,xl:6,sx:{boxShadow:3,background:"#5C4F81"},children:[Object($.jsx)(yt,{value:a,index:0,children:Object($.jsx)(xt,{user:e})}),Object($.jsx)(yt,{value:a,index:1,children:Object($.jsx)(gt,{})}),Object($.jsx)(yt,{value:a,index:2,children:Object($.jsx)(mt,{})}),Object($.jsx)(yt,{value:a,index:3,children:"Item Four"})]})]})}),Object($.jsx)(Oe.a,{open:F,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object($.jsxs)(x.a,{sx:ft,children:[Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center"},children:""===O&&!g&&Object($.jsxs)("label",{htmlFor:"icon-button-file",children:[Object($.jsx)("input",{style:{display:"none"},...r("picFile"),accept:"image/*",type:"file",id:"icon-button-file"}),Object($.jsx)(ie.a,{sx:{background:"#463A63",color:"#fff","&:hover":{background:"#463A63"},width:100,height:100,mb:2},color:"primary","aria-label":"upload picture",component:"span",children:Object($.jsx)(Ot.a,{sx:{fontSize:25}})})]})}),Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center"},children:g&&""===O&&Object($.jsx)(se.a,{sx:{mb:2},variant:"circular",width:110,height:110})}),Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center"},children:""!==O&&Object($.jsx)(f.a,{sx:{width:110,height:110,mb:2},src:O,alt:"yourImage"})}),Object($.jsxs)(x.a,{id:"updateButton_container",children:[A?Object($.jsx)(oe.a,{disabled:!0,variant:"outlined",sx:T,children:"Loading..."}):Object($.jsx)(oe.a,{onClick:async()=>{null!==O&&""!==O&&e.uid&&(_(!0),await C.a.put("http://localhost:8080/users/updateprofile/".concat(e.uid),{photoURL:O}).then((()=>{h(S.displayName,O),_(!1)})))},variant:"outlined",sx:T,children:"UPDATE"}),Object($.jsx)(oe.a,{onClick:()=>{w(""),_(!1),v(!1)},disabled:!!A,variant:"outlined",sx:T,children:"CANCEL"}),Object($.jsx)(oe.a,{onClick:()=>{z(!1),setTimeout((()=>w("")),1e3)},sx:T,variant:"outlined",children:"CLOSE"})]})]})})]})}const wt=()=>{const e=Object(o.useRef)(null),{reseatPassword:t,processing:a}=pe();return Object($.jsx)($.Fragment,{children:Object($.jsx)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object($.jsx)(x.a,{sx:{width:{md:300},boxShadow:2},children:Object($.jsxs)("form",{className:"resetpass_field",onSubmit:a=>{a.preventDefault(),t(e.current.value)},children:[Object($.jsx)(m.a,{sx:{mb:1,color:"whitesmoke"},variant:"body2",children:"Note:- Please give this email which you used on login and now you dunno this password. Otherwise passworld will be not change."}),Object($.jsx)("input",{placeholder:"Enter email *",ref:e,required:!0,type:"email"}),a?Object($.jsx)("button",{disabled:!0,children:"Loading..."}):Object($.jsx)("button",{type:"submit",children:"  SEND"})]})})})})};var Ct=()=>{const{loginUser:e}=k((e=>null===e||void 0===e?void 0:e.data)),t=y();return Object(o.useEffect)((()=>{t(I()),t(E())}),[e]),Object($.jsx)($.Fragment,{children:Object($.jsxs)(b.d,{children:[Object($.jsx)(b.b,{path:"/",element:Object($.jsx)(ut,{children:Object($.jsx)(lt,{})})}),Object($.jsx)(b.b,{path:"/login",element:Object($.jsx)(dt,{})}),Object($.jsx)(b.b,{path:"/reseatpass",element:Object($.jsx)(wt,{})}),Object($.jsx)(b.b,{path:"/setting/:userId",element:Object($.jsx)(kt,{})})]})})};const St=Object(S.a)({reducer:{data:Q}});var Ut=a(99);i.a.render(Object($.jsx)(s.a.StrictMode,{children:Object($.jsxs)(l.a,{store:St,children:[Object($.jsx)(Ut.a,{children:Object($.jsx)(Ct,{})}),","]})}),document.getElementById("root"))}},[[608,1,2]]]);
//# sourceMappingURL=main.8e5068ff.chunk.js.map